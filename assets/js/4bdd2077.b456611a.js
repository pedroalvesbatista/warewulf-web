"use strict";(self.webpackChunkwarewulf=self.webpackChunkwarewulf||[]).push([[6690],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return f}});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=c(n),f=i,m=d["".concat(s,".").concat(f)]||d[f]||p[f]||a;return n?r.createElement(m,o(o({ref:t},u),{},{components:n})):r.createElement(m,o({ref:t},u))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var c=2;c<a;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},7064:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return u},default:function(){return d}});var r=n(7462),i=n(3366),a=(n(7294),n(3905)),o=["components"],l={id:"initialization",title:"Warewulf Initialization"},s=void 0,c={unversionedId:"enchiridion/initialization",id:"enchiridion/initialization",isDocsHomePage:!1,title:"Warewulf Initialization",description:"System Services",source:"@site/docs/enchiridion/initialization.md",sourceDirName:"enchiridion",slug:"/enchiridion/initialization",permalink:"/docs/enchiridion/initialization",editUrl:"https://github.com/hpcng/warewulf-web/edit/main/docs/enchiridion/initialization.md",tags:[],version:"current",frontMatter:{id:"initialization",title:"Warewulf Initialization"},sidebar:"someSidebar",previous:{title:"Warewulf Configuration",permalink:"/docs/enchiridion/configuration"},next:{title:"Container Management",permalink:"/docs/enchiridion/containers"}},u=[{value:"System Services",id:"system-services",children:[]},{value:"Warewulf Service",id:"warewulf-service",children:[{value:"Logs",id:"logs",children:[]}]}],p={toc:u};function d(e){var t=e.components,n=(0,i.Z)(e,o);return(0,a.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"system-services"},"System Services"),(0,a.kt)("p",null,"Once Warewulf has been installed and configured, it is ready to be initialized and have the associated system services started. To do this, start by configuring the system services that Warewulf depends on for operation. To do that, run the following command:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"sudo wwctl configure --all\n")),(0,a.kt)("p",null,"This command will configure the system for Warewulf to run properly. Here are the things it will do:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"dhcp"),": (re)Write the DHCP configuration and restart the service from the configured template in ",(0,a.kt)("inlineCode",{parentName:"li"},"/etc/warewulf/dhcp/")," and enable the system service."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"hostfile"),": Update the system's /etc/hosts file based on the template ",(0,a.kt)("inlineCode",{parentName:"li"},"/etc/warewulf/hosts.tmpl"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"nfs"),": Configure the NFS server on the control node as well as the ",(0,a.kt)("inlineCode",{parentName:"li"},"/etc/fstab")," in the system overlay based on the configuration in ",(0,a.kt)("inlineCode",{parentName:"li"},"/etc/warewulf/warewulf.conf")," and enable the system service."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"ssh"),": Create the appropriate host keys (stored in ",(0,a.kt)("inlineCode",{parentName:"li"},"/etc/warewulf/keys/"),") and user keys for passwordless ",(0,a.kt)("inlineCode",{parentName:"li"},"ssh")," into the nodes."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"tftp"),": Write the appropriate binary PXE/iPXE blobs to the TFTP root directory and enable the system service.")),(0,a.kt)("p",null,"This command will quickly setup the system services per the Warewulf configuration. Watch this output carefully for errors and resolve them in the configuration portion of this manual."),(0,a.kt)("h2",{id:"warewulf-service"},"Warewulf Service"),(0,a.kt)("p",null,"The Warewulf installation attempts to register the Warewulf service with Systemd, so it should be as easy to start/stop/check as any other Systemd service:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"sudo systemctl enable --now warewulfd\n")),(0,a.kt)("p",null,"You can also check and control the Warewulf service using the ",(0,a.kt)("inlineCode",{parentName:"p"},"wwctl")," command line program as follows:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"sudo wwctl server status\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"note: If the Warewulf service is running via Systemd, restarting stopping, and starting it from the ",(0,a.kt)("inlineCode",{parentName:"p"},"wwctl")," command may result in unexpected results.")),(0,a.kt)("h3",{id:"logs"},"Logs"),(0,a.kt)("p",null,"The Warewulf server logs are by default written to ",(0,a.kt)("inlineCode",{parentName:"p"},"/var/log/warewulfd.log"),"."))}d.isMDXComponent=!0}}]);